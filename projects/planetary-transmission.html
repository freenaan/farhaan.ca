<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>3-Speed Planetary Transmission — Farhaan</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main>
    <section class="project-hero" style="background-image: url('https://images.unsplash.com/photo-1518779578993-ec3579fee39f?auto=format&fit=crop&w=1650&q=80')">
      <div class="site-inner hero-header">
        <div class="brand"><a href="../index.html">Farhaan.ca</a></div>
        <nav class="nav">
          <a class="btn" href="#contact">Contact</a>
        </nav>
      </div>
      <h1 class="anim-1">3-Speed Planetary Transmission</h1>
    </section>

    <section class="project-content">
      <div class="project-inner">
        <div class="project-summary">
          <div>
            <h2>Overview</h2>
            <p>This project documents a compact 3-speed planetary transmission I designed and prototyped. It focuses on efficient gear-train layout, ease of shifting and robust torque transfer for small-vehicle applications.</p>
            <p>The page includes detailed CAD renders, build notes, and performance testing results. The design choices prioritize manufacturability and compact packaging.</p>

            <div class="thumbs">
              <div class="thumb"><img src="https://images.unsplash.com/photo-1549924231-f129b911e442?auto=format&fit=crop&w=800&q=60" alt="thumb1"></div>
              <div class="thumb"><img src="https://images.unsplash.com/photo-1581091870629-3c8f9c8a6d4d?auto=format&fit=crop&w=800&q=60" alt="thumb2"></div>
              <div class="thumb"><img src="https://images.unsplash.com/photo-1581092335878-0b8d9a5a4b77?auto=format&fit=crop&w=800&q=60" alt="thumb3"></div>
            </div>
          </div>

          <aside>
            <h3>Quick Facts</h3>
            <ul>
              <li>Type: Planetary gearset</li>
              <li>Speeds: 3</li>
              <li>Materials: Steel & aluminium</li>
            </ul>
          </aside>
        </div>

        <div class="project-footer">© Farhaan Khan 2026</div>
      </div>
    </section>
  </main>

  <script>
  (function(){
    // background zoom/fade behaviour adapted from provided snippet (vanilla JS)
    var hero = document.querySelector('.project-hero');
    var title = document.querySelector('.project-hero h1');
    if(!hero) return;

    // Set starting background-size (must match CSS percent)
    var startBg = window.getComputedStyle(hero).backgroundSize || '250%';
    var zoomPct = 250;
    try{
      if(startBg.indexOf('%')>-1) zoomPct = parseFloat(startBg);
    }catch(e){}

    var baseSize = (zoomPct/100) * hero.offsetWidth;
    var doc = document.documentElement;

    function onScroll(){
      var fromTop = Math.max(0, window.scrollY || doc.scrollTop);

      // background size reduces as you scroll, similar to original formula
      var newSize = baseSize - (fromTop/3);
      if(newSize < hero.offsetWidth) newSize = hero.offsetWidth;
      hero.style.backgroundSize = newSize + 'px';

      // blur proportionally and fade out
      var blur = Math.min(12, fromTop/100);
      hero.style.filter = 'blur(' + blur + 'px)';

      // opacity based on scroll relative to document height (keeps effect subtle)
      var opacity = 1 - ((fromTop / (doc.scrollHeight||document.body.scrollHeight)) * 1.3);
      opacity = Math.max(0, Math.min(1, opacity));
      hero.style.opacity = opacity;

      // title fades and slightly scales toward background
      if(title){
        var maxFade = 300;
        var t = Math.max(0, 1 - fromTop / maxFade);
        title.style.opacity = t;
        var scale = 1 - (1 - t) * 0.04;
        title.style.transform = 'scale(' + scale + ')';
      }
    }

    // Non-Chrome/Safari: add opaque overlay and fade it in as fallback
    var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
    var isSafari = /Safari/.test(navigator.userAgent) && /Apple Computer/.test(navigator.vendor);
    if(!(isChrome || isSafari)){
      var o = document.createElement('div');
      o.className = 'opaque';
      hero.appendChild(o);
      window.addEventListener('scroll', function(){
        var op = Math.min(1, (window.scrollY||0)/5000);
        o.style.opacity = op;
      }, { passive: true });
    }

    window.addEventListener('scroll', onScroll, { passive: true });
    onScroll();
  })();
  </script>

  <script src="../script.js"></script>
</body>
</html>
